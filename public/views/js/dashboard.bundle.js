import{s as a}from"./navbar.i1vY3KiY.js";const l=async()=>{const e=await fetch("/api/token",{method:"GET",credentials:"same-origin"}),o=await e.json();return!e.ok&&!o.error&&(window.location.href="/?message=server_error"),e.ok||(window.location.href=`/?message=${o.error}`),o},s={FEEDBACK_DURATION_MS:2e3,SUCCESS_TEXT:"복사됨!",DEFAULT_TEXT:"복사",ERROR_MESSAGE:"클립보드 복사에 실패했습니다.",CLASS_NAME:"copied"},i={COPY_ICON:".copy-icon",CHECK_ICON:".check-icon",COPY_TEXT:".copy-text"};function y(e){const o=e.querySelector(i.COPY_ICON),n=e.querySelector(i.CHECK_ICON),t=e.querySelector(i.COPY_TEXT);if(!o||!n||!t)throw new Error("Copy content element not found");return{copyIcon:o,checkIcon:n,copyText:t}}function C(e,o){e.copyIcon.style.display="none",e.checkIcon.style.display="block",e.copyText.textContent=s.SUCCESS_TEXT,o.classList.add(s.CLASS_NAME)}function d(e,o){e.copyIcon.style.display="block",e.checkIcon.style.display="none",e.copyText.textContent=s.DEFAULT_TEXT,o.classList.remove(s.CLASS_NAME)}async function T(e,o){try{await navigator.clipboard.writeText(e);const n=y(o);C(n,o),setTimeout(()=>{d(n,o)},s.FEEDBACK_DURATION_MS)}catch(n){console.error("복사 실패:",n),alert(s.ERROR_MESSAGE)}}const c={ACCESS_TOKEN_CONTENT:"accessToken",REFRESH_TOKEN_CONTENT:"refreshToken",REFRESH_TOKEN_SECTION:"refreshTokenSection",COPY_TOKEN_BTN:"copyTokenBtn",COPY_REFRESH_TOKEN_BTN:"copyRefreshTokenBtn",REVOKE_BTN:"revokeBtn"};function _(){const e=document.getElementById(c.ACCESS_TOKEN_CONTENT),o=document.getElementById(c.REFRESH_TOKEN_CONTENT),n=document.getElementById(c.REFRESH_TOKEN_SECTION),t=document.getElementById(c.COPY_TOKEN_BTN),r=document.getElementById(c.COPY_REFRESH_TOKEN_BTN),E=document.getElementById(c.REVOKE_BTN);return!e||!o||!n||!t||!r||!E?(console.warn("One or more required DOM elements not found"),null):{accessTokenContent:e,refreshTokenContent:o,refreshTokenSection:n,copyTokenBtn:t,copyRefreshTokenBtn:r,revokeBtn:E}}function S(e,o,n){e.accessTokenContent.textContent=o,e.refreshTokenContent.textContent=n,n&&(e.refreshTokenSection.style.display="block")}async function O(){try{const{accessToken:e,refreshToken:o}=await l(),n=_(),t=document.getElementById("loadingSection"),r=document.getElementById("successSection");if(!n)return;t&&r&&e&&o&&(t.style.display="none",r.style.display="block"),S(n,e,o),n.copyTokenBtn.addEventListener("click",()=>{T(e,n.copyTokenBtn)}),n.copyRefreshTokenBtn.addEventListener("click",()=>{T(o,n.copyRefreshTokenBtn)}),n.revokeBtn.addEventListener("click",E=>{confirm("정말로 Google 계정 권한을 취소하시겠습니까?")||E.preventDefault()})}catch(e){console.error("Failed to initialize token display:",e)}}a();O();
